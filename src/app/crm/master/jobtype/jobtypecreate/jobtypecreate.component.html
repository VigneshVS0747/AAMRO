<div class="table-list-display">
    <div class="component-creation">
        <div class="header-container">
            <h3 class="box-title">
                <img src="./assets/images/billing-storage.png" alt="Job Type" />
                <span>Job Type</span>
            </h3>
            <button class="btn btn-primary returntolistbtn" type="button" (click)="returnToList()">
                <i class="fa fa-list me-2"></i> Return to List
            </button>
        </div>
    </div>
    <hr class="mt-3 mb-4" />
    <mat-card>
        <mat-card-title class="title">
            Job Type
        </mat-card-title>
        <br />
        <mat-tab-group animationDuration="0ms" [(selectedIndex)]="selectedIndex" #matgroup>
            <!-- General -->
            <mat-tab class="my-2">
                <ng-template mat-tab-label>
                    <i class="fas fa-house"></i>
                   General
                         </ng-template>
                <div class="table-list-display">
                    <div class="component-creation">
                        <div class="header-container">
                            <form [formGroup]="jobTypeGeneralform" #form="ngForm" class="mt-3">
                                <div class="row">
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Job Type Code</mat-label>
                                            <input matInput type="text" formControlName="jobTypeCode"
                                                [readonly]="disablefields" required maxlength="10"
                                                placeholder="Job Type Code" autocomplete="off">
                                            <mat-error *ngIf="!jobTypeGeneralform.controls['jobTypeCode'].value">Job
                                                type code is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Job Type Name</mat-label>
                                            <input matInput type="text" formControlName="jobTypeName"
                                                [readonly]="disablefields" required maxlength="50"
                                                placeholder="Job Type Name" autocomplete="off">
                                            <mat-error *ngIf="!jobTypeGeneralform.controls['jobTypeName'].value">Job
                                                type name is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Job Category</mat-label>
                                            <input matInput formControlName="jobCategoryId" [readonly]="disablefields"
                                                [matAutocomplete]="autojob">
                                                <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-error *ngIf="!jobTypeGeneralform.controls['jobCategoryId'].value">Job
                                                category is
                                                required*</mat-error>
                                        </mat-form-field>

                                        <mat-autocomplete #autojob="matAutocomplete"
                                            [displayWith]="displayjobCategoryLabelFn"
                                            (optionSelected)="jobCategorySelectedoption($event)">

                                            <mat-option
                                                *ngFor="let jobCategoryList of filteredjobCategoryOptions$ | async"
                                                [value]="jobCategoryList" [disabled]="jobCategoryList.isNotFound">
                                                {{ jobCategoryList.jobCategory }}
                                            </mat-option>

                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label  [ngClass]="{'labelcolor': isFieldEnabled(), 'labelcolorGray': !isFieldEnabled()}" >Mode of Transport</mat-label>
                                            <mat-select formControlName="transportModeId" [readonly]="disablefields"
                                                [multiple]="true" (selectionChange)="transportSelectedoption($event)">
                                                <mat-option
                                                    *ngFor="let modeofTransportList of filteredTransportOptions$ | async"
                                                    [value]="modeofTransportList.modeofTransportId">
                                                    {{ modeofTransportList.modeofTransport }}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error *ngIf="!jobTypeGeneralform.controls['transportModeId'].value">Job
                                                type name is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>

                                    <!-- <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Mode of Transport</mat-label>
                                            <input matInput formControlName="transportModeId" [readonly]="disablefields"
                                                [matAutocomplete]="autoTransport">
                                                <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        </mat-form-field>

                                        <mat-autocomplete #autoTransport="matAutocomplete"
                                            [displayWith]="displayTransportLabelFn"
                                            (optionSelected)="transportSelectedoption($event)">

                                            <mat-option
                                                *ngFor="let modeofTransportList of filteredTransportOptions$ | async"
                                                [value]="modeofTransportList"
                                                [disabled]="modeofTransportList.isNotFound">
                                                {{ modeofTransportList.modeofTransport }}
                                            </mat-option>

                                        </mat-autocomplete>
                                    </div> -->
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Inco terms</mat-label>
                                            <input matInput formControlName="incoTermId" [readonly]="disablefields"
                                                [matAutocomplete]="autoincoTerm" (keydown)="incoTermEmpty($event)">
                                                <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <!-- <mat-error *ngIf="!jobTypeGeneralform.controls['incoTermId'].value">
                                                Inco terms is required*.
                                            </mat-error> -->
                                        </mat-form-field>

                                        <mat-autocomplete #autoincoTerm="matAutocomplete"
                                            [displayWith]="displayIncotermLabelFn"
                                            (optionSelected)="incotermSelectedoption($event)">

                                            <mat-option *ngFor="let incotermList of filteredincotermOptions$ | async"
                                                [value]="incotermList" [disabled]="incotermList.isNotFound">
                                                {{ incotermList.incoTermCode }}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-checkbox class="statusmargin" formControlName="partDetails">Part
                                            Details</mat-checkbox>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-checkbox class="statusmargin"
                                            formControlName="packageDetails">Package Details</mat-checkbox>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-checkbox class="statusmargin"
                                            formControlName="livestatus">Active</mat-checkbox>
                                    </div>
                                  
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Remarks</mat-label>
                                            <textarea matInput cols="8" rows="2" [readonly]="disablefields"
                                                maxlength="500" placeholder="" formControlName="remarks"></textarea>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </mat-tab>&nbsp;

            <!-- Line Item -->

            <mat-tab >
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-sitemap fa-lg"></i>&nbsp;
                    Line Item Details
                         </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div fxLayout="row" fxLayoutWrap="wrap">
                            <div class="text-end">
                                <button class="btn btn-primary Addbtn" type="button" *ngIf="!viewMode"
                                    (click)="AddLineItem()">
                                    <i class="fa fa-plus-circle me-2"></i>Add
                                </button>
                            </div>
                            <hr class="mt-0 mb-4" />
                            <section class="custom-table-wrapper">
                                <kendo-grid [kendoGridBinding]="jobTypeLineItems" [filterable]="true" [resizable]="true"
                                    [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                    [selectable]="{enabled: true}"(pageChange)="pageChange($event)"
                                    [skip]="skip">
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px', overflow: 'visible' }"
                                        [headerStyle]="{ justifyContent: 'center' }" field="lineItemName"
                                        title="Line Item *" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditLineItem">
                                                <div class="ng-autocomplete">
                                                    <ng-autocomplete [data]="lineItemDatalist"
                                                        [searchKeyword]="keywordLine" placeholder="Select item"
                                                        (selected)="selectLineevent($event)"
                                                        (input)="onInputChangeLineItem($event, dataItem)"
                                                        [itemTemplate]="itemTemplate"
                                                        [(ngModel)]="dataItem.lineItemName"
                                                        [notFoundTemplate]="notFoundTemplate">
                                                    </ng-autocomplete>
                                                    <ng-template #itemTemplate let-item>
                                                        <a [innerHTML]="item.lineItemName"></a>
                                                    </ng-template>
                                                    <ng-template #notFoundTemplate let-notFound>
                                                        <div [innerHTML]="notFound"></div>
                                                    </ng-template>
                                                    <div class="text-danger"
                                                        *ngIf="ValidateFieldLine(dataItem.lineItemName)">
                                                        <span>Line item is required*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!dataItem.IseditLineItem">
                                                {{ dataItem.lineItemName }}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                        [headerStyle]="{'justifyContent': 'center'}" field="lineItemCode"
                                        title="Line Item Code" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditLineItem">
                                                <input type="text" class="form-control" [(ngModel)]="lineItemCode"
                                                    readonly>
                                            </div>
                                            <div *ngIf="!dataItem.IseditLineItem">
                                                {{dataItem.lineItemCode}}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>

                                    <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                        [headerStyle]="{'justifyContent': 'center'}" field="lineItemCategoryName"
                                        title="Line Item Category" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditLineItem">
                                                <input type="text" class="form-control"
                                                    [(ngModel)]="lineItemCategoryName" readonly>
                                            </div>
                                            <div *ngIf="!dataItem.IseditLineItem">
                                                {{dataItem.lineItemCategoryName}}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px',overflow: 'visible' }"
                                        [headerStyle]="{ justifyContent: 'center' }" field="invoicingFlag"
                                        title="Invoicing Type *" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditLineItem">
                                                <div class="ng-autocomplete">
                                                    <ng-autocomplete [data]="invoicingFlagList"
                                                        [searchKeyword]="keywordInvoice" placeholder="Select Invoicing"
                                                        (selected)="selectInvoiceevent($event)"
                                                        [itemTemplate]="itemTemplate"
                                                        (input)="onInputChangeinvoicingFlag($event, dataItem)"
                                                        [(ngModel)]="dataItem.invoicingFlag"
                                                        [notFoundTemplate]="notFoundTemplate">
                                                    </ng-autocomplete>
                                                    <ng-template #itemTemplate let-item>
                                                        <a [innerHTML]="item.invoicingFlag"></a>
                                                    </ng-template>
                                                    <ng-template #notFoundTemplate let-notFound>
                                                        <div [innerHTML]="notFound"></div>
                                                    </ng-template>
                                                    <div class="text-danger"
                                                        *ngIf="ValidateFieldLine(dataItem.invoicingFlag)">
                                                        <span>Invoicing Flag is required*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!dataItem.IseditLineItem">
                                                {{ dataItem.invoicingFlag }}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{'text-align': 'center'}"
                                        [headerStyle]="{'justifyContent': 'center'}" title="Action" [width]="80" [sticky]="true">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="!dataItem.IseditLineItem">
                                                <a type="button" *ngIf="!viewMode" (click)="EditLineItem(dataItem)"><i
                                                        class="fas fa-square-pen"></i></a>&nbsp;
                                                <a type="submit" *ngIf="!viewMode" (click)="DeleteLineItem(dataItem)"><i
                                                        class="fas fa-trash"></i></a>
                                            </div>
                                            <div *ngIf="dataItem.IseditLineItem">
                                                <a type="submit" *ngIf="!viewMode" #submitButton tabindex="0"
                                                    (keydown.enter)="hndlKeyPressLineItem($event , dataItem)"
                                                    (change)="hndlChangeLineItem($event)"
                                                    (click)="showAddRowLineItem ? SaveLineItem(dataItem) : UpdateLineItem(dataItem)">
                                                    <ng-container *ngIf="showAddRowLineItem; else editIcon">
                                                        <i class="fas fa-sd-card"></i>
                                                    </ng-container>
                                                    <ng-template #editIcon>
                                                        <i class="fas fa-sd-card"></i>
                                                    </ng-template>
                                                </a>&nbsp;
                                                <a type="submit" *ngIf="!viewMode" #cancelButton tabindex="0"
                                                    (keydown.enter)="handleKeyPressLineItem($event , dataItem)"
                                                    (click)="oncancelLineItem(dataItem)"><i
                                                        class="fas fa-xmark"></i></a>
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-row-index></kendo-grid-row-index>
                                    <ng-template kendoPagerTemplate>
                                        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                        <kendo-pager-numeric-buttons [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                        <kendo-pager-next-buttons></kendo-pager-next-buttons>
                              
                                        <kendo-pager-page-sizes class="Page-Short" [pageSizes]="sizes"></kendo-pager-page-sizes>
                                        <kendo-pager-info></kendo-pager-info>
                                      </ng-template>
                                    </kendo-grid>
                                  </section>
                              
                        </div>
                    </div>
                </div>
            </mat-tab>&nbsp;

            <!-- Job status Details -->

            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-sliders fa-lg"></i>&nbsp;
                    Job Stage & Status 
                         </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div class="text-end">
                            <button class="btn btn-primary Addbtn" type="button" *ngIf="!viewMode"
                                (click)="AddStatus()"><i class="fa fa-plus-circle me-2"></i>Add</button>
                        </div>
                        <hr class="mt-0 mb-4">
                        <section class="custom-table-wrapper">
                            <kendo-grid [kendoGridBinding]="jobTypeStatuses" [filterable]="true" [resizable]="true"
                                [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                [selectable]="{enabled: true}"(pageChange)="pageChange($event)"
                                [skip]="skip">

                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="jobStage" title="Job Stage *" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditStatus">
                                            <input type="text" class="form-control" maxlength="50"
                                                [(ngModel)]="dataItem.jobStage">
                                        </div>
                                        <div *ngIf="!dataItem.IseditStatus">
                                            {{dataItem.jobStage}}
                                        </div>
                                        <div class="text-danger" *ngIf="ValidateFieldStatus(dataItem.jobStage)">
                                            <span>Job Stage is required*</span>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="preferenceOrder"
                                    title="Preference Order *" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditStatus">
                                            <input  class="form-control" (input)="preferenceOrder($event,dataItem)"
                                                [(ngModel)]="dataItem.preferenceOrder">
                                        </div>
                                        <div *ngIf="!dataItem.IseditStatus">
                                            {{dataItem.preferenceOrder}}
                                        </div>
                                        <div class="text-danger" *ngIf="ValidateFieldStatus(dataItem.preferenceOrder)">
                                            <span>Preference Order is required*</span>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>

                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="milestoneFlag" filter="boolean"
                                    title="Milestone Flag" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <div *ngIf="dataItem.IseditStatus">
                                            <mat-checkbox class="example-margin" [(ngModel)]="dataItem.milestoneFlag"
                                                (change)="handleChangeStatus($event, dataItem)"></mat-checkbox>
                                        </div>
                                        <div *ngIf="!dataItem.IseditStatus">
                                            <mat-checkbox class="example-margin" [disabled]="true"
                                                [(ngModel)]="dataItem.milestoneFlag"></mat-checkbox>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>

                                <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px',overflow: 'visible' }"
                                    [headerStyle]="{ justifyContent: 'center' }" field="predefinedStage" title="Predefined Stage" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditStatus">
                                            <mat-form-field appearance="fill" class="w-full w-100">
                                                <!-- <mat-label>Region</mat-label> -->
                                                <input type="text" matInput [formControl]="predefinedStageControl" 
                                                [matAutocomplete]="auto" (blur)="onPredefinedBlur()">
                                                <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                                <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                                                    (optionSelected)="predefinedStage($event)">
                                                    <mat-option *ngFor="let item of filteredpredefinedStage | async" [value]="item.jtPredefinedStage">
                                                        {{ item.jtPredefinedStage }}
                                                    </mat-option>
                                                </mat-autocomplete>
           
                                            </mat-form-field>
                                        </div>
                                        <div *ngIf="!dataItem.IseditStatus">
                                            {{ dataItem.jtPredefinedStage }}
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>

                                <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px',overflow: 'visible' }"
                                [headerStyle]="{ justifyContent: 'center' }" field="jobStageStatus" title="Status *" [width]="100">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <div *ngIf="dataItem.IseditStatus">
                                        <div class="ng-autocomplete">
                                            <ng-autocomplete [data]="jobStageStatusList"
                                                [searchKeyword]="keywordStatus" placeholder="Select Status"
                                                (input)="onInputChangeSatus($event, dataItem)"
                                                (selected)="selectstatusevent($event)" [itemTemplate]="itemTemplate"
                                                [(ngModel)]="dataItem.jobStageStatus"
                                                [notFoundTemplate]="notFoundTemplate">
                                            </ng-autocomplete>

                                            <ng-template #itemTemplate let-item>
                                                <a [innerHTML]="item.jobStageStatus"></a>
                                            </ng-template>

                                            <ng-template #notFoundTemplate let-notFound>
                                                <div [innerHTML]="notFound"></div>
                                            </ng-template>
                                            <div class="text-danger"
                                                *ngIf="ValidateFieldStatus(dataItem.jobStageStatus)">
                                                <span>Status is required*</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="!dataItem.IseditStatus">
                                        {{ dataItem.jobStageStatus }}
                                    </div>
                                </ng-template>
                            </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                    [headerStyle]="{'justifyContent': 'center'}" title="Action" [width]="80" [sticky]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="!dataItem.IseditStatus">
                                            <a type="button" *ngIf="!viewMode" (click)="EditStatus(dataItem)"><i
                                                    class="fas fa-square-pen"></i></a>&nbsp;
                                            <a type="submit" *ngIf="!viewMode" (click)="DeleteStatus(dataItem)"><i
                                                    class="fas fa-trash"></i></a>
                                        </div>
                                        <div *ngIf="dataItem.IseditStatus">
                                            <a type="submit" *ngIf="!viewMode" #submitButton tabindex="0"
                                                (keydown.enter)="hndlKeyPressStatus($event , dataItem)"
                                                (change)="hndlChangeStatus($event)"
                                                (click)="showAddRowStatus ? SaveStatus(dataItem) : UpdateStatus(dataItem)">
                                                <ng-container *ngIf="showAddRowStatus; else editIcon">
                                                    <i class="fas fa-sd-card"></i>
                                                </ng-container>
                                                <ng-template #editIcon>
                                                    <i class="fas fa-sd-card"></i>
                                                </ng-template>
                                            </a>&nbsp;
                                            <a type="submit" *ngIf="!viewMode" #cancelButton tabindex="0"
                                                (keydown.enter)="handleKeyPressStatus($event , dataItem)"
                                                (click)="oncancelStatus(dataItem)"><i class="fas fa-xmark"></i></a>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-row-index></kendo-grid-row-index>
                                <ng-template kendoPagerTemplate>
                                    <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                    <kendo-pager-numeric-buttons [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                    <kendo-pager-next-buttons></kendo-pager-next-buttons>
                          
                                    <kendo-pager-page-sizes class="Page-Short" [pageSizes]="sizes"></kendo-pager-page-sizes>
                                    <kendo-pager-info></kendo-pager-info>
                                  </ng-template>
                                </kendo-grid>
                              </section>
                          
                    </div>
                </div>
            </mat-tab>&nbsp;

            <!-- Documents -->

            <mat-tab >
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-file-lines"></i>&nbsp;
                    Documents
                         </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div class="text-end">
                            <button class="btn btn-primary Addbtn" type="button" *ngIf="!viewMode"
                                (click)="AddDocument()"><i class="fa fa-plus-circle me-2"></i>Add</button>
                        </div>
                        <hr class="mt-0 mb-4">
                        <section class="custom-table-wrapper">
                            <kendo-grid [kendoGridBinding]="jobTypeDocuments" [filterable]="true" [resizable]="true"
                                [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                [selectable]="{enabled: true}"(pageChange)="pageChange($event)"
                                [skip]="skip">                        
                                <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px',overflow: 'visible' }"
                                    [headerStyle]="{ justifyContent: 'center' }" field="documentName"
                                    title="Document Name *" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditDoc">
                                            <div class="ng-autocomplete">
                                                <ng-autocomplete [data]="documents" [searchKeyword]="keywordDoc"
                                                (input)="onInputChange($event, dataItem)"
                                                    placeholder="Select Document" (selected)="selectDocevent($event)"
                                                    [itemTemplate]="itemTemplate" [(ngModel)]="dataItem.documentName"
                                                    [notFoundTemplate]="notFoundTemplate" [disabled]="isEditDocument">
                                                </ng-autocomplete>
                                                <ng-template #itemTemplate let-item>
                                                    <a [innerHTML]="item.documentName"></a>
                                                </ng-template>
                                                <ng-template #notFoundTemplate let-notFound>
                                                    <div [innerHTML]="notFound"></div>
                                                </ng-template>
                                                <div class="text-danger"
                                                    *ngIf="ValidateFieldDoc(dataItem.documentName)">
                                                    <span>Document is required*</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div *ngIf="!dataItem.IseditDoc">
                                            {{ dataItem.documentName }}
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>

                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="documentCode"
                                    title="Document Code" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditDoc">
                                            <input type="text" class="form-control" [(ngModel)]="documentCode" readonly>
                                        </div>
                                        <div *ngIf="!dataItem.IseditDoc">
                                            {{dataItem.documentCode}}
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                [headerStyle]="{'justifyContent': 'center'}" field="mandatory" filter="boolean"
                                title="Mandatory" [width]="100">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <div *ngIf="dataItem.IseditDoc">
                                        <mat-checkbox class="example-margin" [(ngModel)]="dataItem.mandatory"
                                            (change)="handleChangeDoc($event, dataItem)"></mat-checkbox>
                                    </div>
                                    <div *ngIf="!dataItem.IseditDoc">
                                        <mat-checkbox class="example-margin" [disabled]="true"
                                            [(ngModel)]="dataItem.mandatory"></mat-checkbox>
                                    </div>
                                </ng-template>
                            </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="remarks"
                                    title="Remarks" [width]="150">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="dataItem.IseditDoc">
                                            <textarea type="text" class="form-control" maxlength="500"
                                                [(ngModel)]="remarks"></textarea>
                                        </div>
                                        <div *ngIf="!dataItem.IseditDoc">
                                            {{dataItem.remarks}}
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                               
                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                    [headerStyle]="{'justifyContent': 'center'}" title="Action" [width]="80" [sticky]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="!dataItem.IseditDoc">
                                            <a type="button" *ngIf="!viewMode" (click)="EditDoc(dataItem)"><i
                                                    class="fas fa-square-pen"></i></a>&nbsp;
                                            <a type="submit" *ngIf="!viewMode" (click)="Deletedoc(dataItem)"><i
                                                    class="fas fa-trash"></i></a>
                                        </div>
                                        <div *ngIf="dataItem.IseditDoc">
                                            <a type="submit" *ngIf="!viewMode" #submitButton tabindex="0"
                                                (keydown.enter)="hndlKeyPressDoc($event , dataItem)"
                                                (change)="hndlChangeDoc($event)"
                                                (click)="showAddRowDoc ? SaveDoc(dataItem) : UpdateDoc(dataItem)">
                                                <ng-container *ngIf="showAddRowDoc; else editIcon">
                                                    <i class="fas fa-sd-card"></i>
                                                </ng-container>
                                                <ng-template #editIcon>
                                                    <i class="fas fa-sd-card"></i>
                                                </ng-template>
                                            </a>&nbsp;
                                            <a type="submit" *ngIf="!viewMode" #cancelButton tabindex="0"
                                                (keydown.enter)="handleKeyPressDoc($event , dataItem)"
                                                (click)="oncancelDoc(dataItem)"><i class="fas fa-xmark"></i></a>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-row-index></kendo-grid-row-index>
                                <ng-template kendoPagerTemplate>
                                    <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                    <kendo-pager-numeric-buttons [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                    <kendo-pager-next-buttons></kendo-pager-next-buttons>
                          
                                    <kendo-pager-page-sizes class="Page-Short" [pageSizes]="sizes"></kendo-pager-page-sizes>
                                    <kendo-pager-info></kendo-pager-info>
                                  </ng-template>
                                </kendo-grid>
                              </section>
                          
                    </div>
                </div>
            </mat-tab>&nbsp;
            
            <!-- Terms & Conditions -->

            <mat-tab >
                <ng-template mat-tab-label>
                    <i class="fas fa-award"></i>
                    Terms & Conditions
                         </ng-template>
                <quill-editor [format]="'json'" [formControl]="content" placeholder="Terms & Conditions..."
                    style="width: 100%;height: 70vh;"></quill-editor>
            </mat-tab>
            
        </mat-tab-group>
    </mat-card>
</div>
<div class="m-4 mb-5 d-flex justify-content-end" style="bottom: 115px;">
    <button class="btn btn-primary savebtn me-1" type="submit" *ngIf="!viewMode && !gereralEdit" (click)="onSaveGeneral()"><i
            class="fa fa-save me-2"></i> Save</button>
    <button class="btn btn-primary savebtn me-1" type="submit" *ngIf="!viewMode && gereralEdit" (click)="onSaveGeneral()"><i
            class="fa fa-save me-2"></i> Update</button>

    <button type="button" class="btn btn-danger resetbtn" *ngIf="!viewMode" (click)="resetGeneral()"><i
            class="fa fa-times-circle"></i> Reset</button>
</div>