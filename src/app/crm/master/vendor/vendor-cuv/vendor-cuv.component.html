<div class="table-list-display">
    <div class="component-creation">
        <div class="header-container">
            <h3 class="box-title">
                <img src="./assets/images/billing-storage.png" alt="Potential Customer" />
                <span>Vendor</span>
            </h3>
            <button class="btn btn-primary returntolistbtn" type="button" (click)="returnToList()">
                <i class="fa fa-list me-2"></i> Return to List
            </button>
        </div>
    </div>
    <hr class="mt-3 mb-4" />
    <mat-card>
        <mat-card-title class="title">
            {{processTitle}}
        </mat-card-title>
        <br />
        <mat-tab-group animationDuration="0ms" [(selectedIndex)]="selectedIndex" #matgroup>
            <mat-tab class="my-2">
                <ng-template mat-tab-label>
                    <i class="fas fa-house"></i>
                    General
                </ng-template>
                <div class="table-list-display">
                    <div class="component-creation">
                        <div class="header-container">
                            <form [formGroup]="VendorForm" #form="ngForm" class="mt-3">
                                <div class="row">
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolorGray">Vendor Id</mat-label>
                                            <input matInput type="text" formControlName="vendorCode" maxlength="20"
                                                placeholder="Vendor Code" autocomplete="off" readonly>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Name</mat-label>
                                            <input matInput type="text" [readonly]="disablefields" maxlength="200"
                                                formControlName="vendorName" required placeholder="Vendor Name"
                                                autocomplete="off" (blur)="updateAliasName($event)">
                                            <mat-error *ngIf="!VendorForm.controls['vendorName'].value">Vendor Name is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Alias Name</mat-label>
                                            <input matInput type="text" [readonly]="disablefields" maxlength="200"
                                                formControlName="aliasName" required placeholder="Alias Name"
                                                autocomplete="off" required>
                                            <mat-error *ngIf="!VendorForm.controls['aliasName'].value">Alias Name is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Phone</mat-label>
                                            <input matInput type="text" [readonly]="disablefields"
                                                formControlName="vendorPhone" placeholder="Vendor Phone" maxlength="15"
                                                (keypress)="restrictInput($event)" autocomplete="off" required>
                                            <mat-error *ngIf="!VendorForm.controls['vendorPhone'].value">Vendor Phone is
                                                required*</mat-error>
                                        </mat-form-field>
                                        <!-- (keydown)="onKeydown($event)" -->
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Company Website</mat-label>
                                            <input matInput type="text" [readonly]="disablefields" maxlength="100"
                                                formControlName="companyWebsite" placeholder="Company Website"
                                                autocomplete="off">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Email</mat-label>
                                            <input matInput type="email" [readonly]="disablefields" maxlength="100"
                                                formControlName="vendorEmail" placeholder="Vendor Email"
                                                autocomplete="off" required>
                                            <mat-error *ngIf="!VendorForm.controls['vendorEmail'].value">Vendor Email is
                                                required*</mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Type
                                            </mat-label>
                                            <input matInput formControlName="vendorType" [readonly]="disablefields"
                                                [matAutocomplete]="vendorType" required>
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-error *ngIf="!VendorForm.controls['vendorType'].value">Vendor Type is
                                                required*</mat-error>
                                        </mat-form-field>
                                        <mat-autocomplete #vendorType="matAutocomplete"
                                            [displayWith]="displayVendorTypeListLabelFn"
                                            (optionSelected)="VendorListSelectedoption($event)">
                                            <mat-option
                                                *ngFor="let vendorList of filteredVendorTypeListOptions$ | async"
                                                [value]="vendorList" [disabled]="vendorList.isNotFound">
                                                {{ vendorList.cvType}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Currency
                                            </mat-label>
                                            <input matInput formControlName="vendorCurrency" [readonly]="disablefields"
                                                [matAutocomplete]="vendorcurrency" required>
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-error *ngIf="!VendorForm.controls['vendorCurrency'].value">Vendor
                                                Currency is
                                                required*</mat-error>
                                        </mat-form-field>
                                        <mat-autocomplete #vendorcurrency="matAutocomplete"
                                            [displayWith]="displayCurrencyListLabelFn"
                                            (optionSelected)="CurrencyListSelectedoption($event)">
                                            <mat-option
                                                *ngFor="let currencyList of filteredCurrencyListOptions$ | async"
                                                [value]="currencyList" [disabled]="currencyList.isNotFound">
                                                {{ currencyList.currencyName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Billing Currency
                                            </mat-label>
                                            <input matInput formControlName="billingCurrency" [readonly]="disablefields"
                                                [matAutocomplete]="autobillingcurrency" required>
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-error *ngIf="!VendorForm.controls['billingCurrency'].value">Billing
                                                Currency is
                                                required*</mat-error>
                                        </mat-form-field>
                                        <mat-autocomplete #autobillingcurrency="matAutocomplete"
                                            [displayWith]="displayBillCurrencyListLabelFn"
                                            (optionSelected)="billCurrencyListSelectedoption($event)">
                                            <mat-option
                                                *ngFor="let billingCurrencyList of filteredbillingCurrencyListOptions$ | async"
                                                [value]="billingCurrencyList"
                                                [disabled]="billingCurrencyList.isNotFound">
                                                {{ billingCurrencyList.billingCurrency}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Year of Operation</mat-label>
                                            <input matInput [readonly]="disablefields" (input)="value($event)"
                                                formControlName="yearOfOperation" maxlength="4">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Status
                                            </mat-label>
                                            <input matInput formControlName="vStatusId" [readonly]="disablefields"
                                                [matAutocomplete]="vendorstatus" required>
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-error *ngIf="!VendorForm.controls['vStatusId'].value">Vendor
                                                Status is
                                                required*</mat-error>
                                        </mat-form-field>
                                        <mat-autocomplete #vendorstatus="matAutocomplete"
                                            [displayWith]="displayVendorStatusListLabelFn"
                                            (optionSelected)="VendorStatusListSelectedoption($event)">
                                            <mat-option
                                                *ngFor="let vendorStatusList of filteredVendorStatusListOptions$ | async"
                                                [value]="vendorStatusList" [disabled]="vendorStatusList.isNotFound"
                                                [disabled]="isOptionDisabled(vendorStatusList)">
                                                {{ vendorStatusList.vStatus}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-md-4">
                                        <mat-form-field>
                                            <mat-label class="labelcolorGray">Approval Status </mat-label>
                                            <input matInput formControlName="approvalStatusId"
                                                [matAutocomplete]="autoApprovalStatus" readonly>
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        </mat-form-field>
                                        <mat-autocomplete #autoApprovalStatus="matAutocomplete"
                                            [displayWith]="displayApprovalStatusLabelFn"
                                            (optionSelected)="selectApprovalStatus($event)">
                                            <mat-option
                                                *ngFor="let approvalStatusList of filteredApprovalStatusOptions$ | async"
                                                [value]="approvalStatusList" [disabled]="approvalStatusList.isNotFound">
                                                {{ approvalStatusList.approvalStatus}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="col-12 col-md-4" *ngIf="showCancelFields">
                                        <mat-form-field class="w-100 mt-1">
                                            <mat-label class="labelcolor">Closed Reason</mat-label>
                                            <input type="text" aria-label="Number" matInput
                                                formControlName="cancelReasonControl" [matAutocomplete]="auto14">
                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                            <mat-autocomplete #auto14="matAutocomplete">
                                                <mat-option *ngFor="let option of filteredcancelReasonControl | async"
                                                    [value]="option?.reasonName">
                                                    {{option?.reasonName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <mat-error *ngIf="!VendorForm.controls['cancelReasonControl'].value">
                                                InActive Reason is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-12 col-md-4" *ngIf="showCancelFields">
                                        <mat-form-field class="w-100 mt-1">
                                            <mat-label class="labelcolor">Closed Remark</mat-label>
                                            <input formControlName="cancelRemarkControl" matInput maxlength="50">

                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-6">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Tags</mat-label>
                                            <textarea matInput cols="8" rows="2" placeholder="" maxlength="100"
                                                [readonly]="disablefields" formControlName="tags"></textarea>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-md-6">
                                        <mat-form-field>
                                            <mat-label class="labelcolor">Vendor Remarks</mat-label>
                                            <textarea matInput cols="8" rows="2" placeholder="" maxlength="500"
                                                [readonly]="disablefields" formControlName="vendorRemarks"></textarea>
                                        </mat-form-field>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </mat-tab>


            <!-- Service Details-->
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fas fa-headset"></i>
                    Service Details
                </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div fxLayout="row" fxLayoutWrap="wrap">
                            <div class="text-end">
                                <button class="btn btn-primary Addbtn" type="button" *ngIf="!viewMode"
                                    (click)="AddService()">
                                    <i class="fa fa-plus-circle me-2"></i>Add
                                </button>
                            </div>
                            <hr class="mt-0 mb-4" />
                            <section class="custom-table-wrapper">
                                <kendo-grid [kendoGridBinding]="vServices" [filterable]="true" [resizable]="true"
                                    [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                    [selectable]="{enabled: true}" (pageChange)="pageChange($event)" [skip]="skip">

                                    <kendo-grid-column
                                        [style]="{ 'text-align': 'left', padding: '5px',overflow: 'visible' }"
                                        [headerStyle]="{ justifyContent: 'center' }" field="countryName"
                                        title="Country Of Operation *" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditServices">
                                                <div class="ng-autocomplete">
                                                    <ng-autocomplete [data]="countries" [searchKeyword]="keywordService"
                                                        placeholder="Select country"
                                                        (selected)="selectServiceEvent($event)"
                                                        [itemTemplate]="itemTemplate" [(ngModel)]="dataItem.countryName"
                                                        [notFoundTemplate]="notFoundTemplate">
                                                    </ng-autocomplete>

                                                    <ng-template #itemTemplate let-item>
                                                        <a [innerHTML]="item.countryName"></a>
                                                    </ng-template>

                                                    <ng-template #notFoundTemplate let-notFound>
                                                        <div [innerHTML]="notFound"></div>
                                                    </ng-template>
                                                    <div class="text-danger"
                                                        *ngIf="ValidateFieldService(dataItem.countryName)">
                                                        <span>Country is required*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!dataItem.IseditServices">
                                                {{ dataItem.countryName }}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <!-- <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }"
                                        [headerStyle]="{ justifyContent: 'center' }" field="serviceTypeName"
                                        title="Service Offered *" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <mat-form-field>
                                                <mat-select multiple [required]="true"
                                                    [(ngModel)]="dataItem.selectedServiceTypes"
                                                    [disabled]="!dataItem.IseditServices"
                                                    (ngModelChange)="onServiceTypeChangeEvent($event)">
                                                    <mat-option *ngFor="let selectedServiceType of servicetypes"
                                                        [value]="selectedServiceType?.serviceTypeId">
                                                        {{ selectedServiceType?.serviceTypeName }}
                                                    </mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="isServiceTypesEmpty">
                                                    Service is required.
                                                </mat-error>
                                            </mat-form-field>

                                            <div *ngIf="!dataItem.IseditServices">
                                                {{ dataItem.serviceTypeName }}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column> -->

                                    <!-- <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }"
                                        [headerStyle]="{ justifyContent: 'center' }" field="serviceTypeName"
                                        title="Service Offered *" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <mat-form-field>
                                                <mat-select multiple [required]="true"
                                                    [(ngModel)]="dataItem.selectedServiceTypes"
                                                    [disabled]="!dataItem.IseditServices"
                                                    (ngModelChange)="onServiceTypeChangeEvent($event)">
                                                    <mat-option *ngFor="let selectedServiceType of servicetypes"
                                                        [value]="selectedServiceType?.serviceTypeId">
                                                        {{ selectedServiceType.serviceTypeName }}
                                                    </mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="isServiceTypesEmpty">
                                                    Service is required.
                                                </mat-error>
                                            </mat-form-field>

                                            <div *ngIf="!dataItem.IseditServices">
                                                {{ dataItem.serviceTypeName }}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column> -->
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }"
                                    [headerStyle]="{ justifyContent: 'center' }" field="lineItemCategoryName"
                                    title="Line Item Category *" [width]="105">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <mat-form-field>
                                            <mat-select multiple [required]="true"
                                                [(ngModel)]="dataItem.lineItemCategorys"
                                                [disabled]="!dataItem.IseditServices"
                                                (ngModelChange)="onlineItemCategoryChangeEvent($event)">
                                                <mat-option *ngFor="let lineItemCategory of lineItemCategoryList"
                                                    [value]="lineItemCategory?.lineItemCategoryId">
                                                    {{ lineItemCategory.lineItemCategoryName }}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error *ngIf="isServiceTypesEmpty">
                                                Line item category name is required.
                                            </mat-error>
                                        </mat-form-field>

                                        <div *ngIf="!dataItem.IseditServices">
                                            {{ dataItem.lineItemCategoryName }}
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>

                                    <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                        [headerStyle]="{'justifyContent': 'center'}" field="remarks" title="Remarks"
                                        [width]="150">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditServices">
                                                <textarea type="text" class="form-control" maxlength="500"
                                                    [(ngModel)]="remarks"></textarea>
                                            </div>
                                            <div *ngIf="!dataItem.IseditServices">
                                                {{dataItem.remarks}}
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                        justifyContent: 'center',
                                        
                                    }" field="liveStatus" filter="boolean" title="Active" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="dataItem.IseditServices">
                                                <mat-checkbox class="example-margin" [disabled]="false"
                                                    [(ngModel)]="dataItem.liveStatus"></mat-checkbox>
                                            </div>
                                            <div *ngIf="!dataItem.IseditServices">
                                                <mat-checkbox class="example-margin" [disabled]="true"
                                                    [(ngModel)]="dataItem.liveStatus"></mat-checkbox>
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{'text-align': 'center'}"
                                        [headerStyle]="{'justifyContent': 'center'}" title="Action" [width]="80"
                                        [sticky]="true">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <div *ngIf="!dataItem.IseditServices ">
                                                <a class="edit" type="button" *ngIf="!viewMode"
                                                    (click)="EditService(dataItem)"><i
                                                        class="fas fa-square-pen"></i></a>&nbsp;
                                                <a class="delete" type="submit" *ngIf="!viewMode"
                                                    (click)="DeleteService(dataItem)"><i class="fas fa-trash"></i></a>
                                            </div>
                                            <div *ngIf="dataItem.IseditServices ">
                                                <a class="edit" type="submit" *ngIf="!viewMode" #submitButton
                                                    tabindex="0"
                                                    (keydown.enter)="hndlKeyPressService($event , dataItem)"
                                                    (change)="handleChangeService($event , dataItem)"
                                                    (click)="showAddRowServices  ? SaveService(dataItem) : UpdateService(dataItem)">
                                                    <ng-container *ngIf="showAddRowServices ; else editIcon">
                                                        <i class="fas fa-sd-card"></i>
                                                    </ng-container>
                                                    <ng-template #editIcon>
                                                        <i class="fas fa-sd-card"></i>
                                                    </ng-template>
                                                </a>&nbsp;
                                                <a class="delete" type="submit" *ngIf="!viewMode" #cancelButton
                                                    tabindex="0"
                                                    (keydown.enter)="hndlKeyPressService($event , dataItem)"
                                                    (click)="oncancelService(dataItem)"><i class="fas fa-xmark"></i></a>
                                            </div>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-row-index></kendo-grid-row-index>
                                    <ng-template kendoPagerTemplate>
                                        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                        <kendo-pager-numeric-buttons
                                            [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                        <kendo-pager-next-buttons></kendo-pager-next-buttons>

                                        <kendo-pager-page-sizes class="Page-Short"
                                            [pageSizes]="sizes"></kendo-pager-page-sizes>
                                        <kendo-pager-info></kendo-pager-info>
                                    </ng-template>
                                </kendo-grid>
                            </section>

                        </div>
                    </div>
                </div>
            </mat-tab>
            <!-- Vendor Contacts -->
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-address-book "></i>&nbsp;
                    Contacts
                </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div fxLayout="row" fxLayoutWrap="wrap">
                            <div class="text-end">
                                <button class="btn btn-primary Addbtn" type="button" *ngIf="!viewMode"
                                    (click)="openDialog()">
                                    <i class="fa fa-plus-circle me-2"></i>Add
                                </button>
                            </div>
                            <hr class="mt-0 mb-4" />

                            <section class="custom-table-wrapper">
                                <kendo-grid [kendoGridBinding]="vendorContacts" [filterable]="true" [resizable]="true"
                                    [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                    [selectable]="{ enabled: true }">
                                    <kendo-grid-column [style]="{
                                      'text-align': 'left',
                                      padding: '5px',
                                      
                                    }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" field="contactPerson" title="Contact Person" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.contactPerson }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" field="contactTypeName" title="Contact Type" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.contactTypeName }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="departmentName" title="Department" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.departmentName }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="designation" title="Designation" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.designation }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="contactPersonPhone" title="Phone" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.contactPersonPhone }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                justifyContent: 'center',
                                
                              }" field="contactPersonEmail" title="Email" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.contactPersonEmail }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" field="primaryContact" filter="boolean" title="Primary Contact" [width]="90">
                                        <ng-template kendoGridCellTemplate let-dataItem>
                                            <mat-checkbox class="example-margin" [disabled]="true"
                                                [(ngModel)]="dataItem.primaryContact"></mat-checkbox>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="liveStatus" filter="boolean" title="Active" [width]="90">
                                        <ng-template kendoGridCellTemplate let-dataItem>
                                            <mat-checkbox class="example-margin" [disabled]="true"
                                                [(ngModel)]="dataItem.liveStatus"></mat-checkbox>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" title="Action" [width]="80" [sticky]="true">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <a class="view" type="button" (click)="onviewContact(dataItem)"><i
                                                    class="fas fa-eye"></i></a>&nbsp;
                                            <a class="edit" type="button" *ngIf="!viewMode"
                                                (click)="onEditContact(dataItem)"><i
                                                    class="fas fa-square-pen"></i></a>&nbsp;
                                            <a class="delete" type="button" *ngIf="!viewMode"
                                                (click)="onDeleteContact(dataItem)"><i
                                                    class="fas fa-trash"></i></a>&nbsp;

                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-row-index></kendo-grid-row-index>
                                    <ng-template kendoPagerTemplate>
                                        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                        <kendo-pager-numeric-buttons
                                            [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                        <kendo-pager-next-buttons></kendo-pager-next-buttons>

                                        <kendo-pager-page-sizes class="Page-Short"
                                            [pageSizes]="sizes"></kendo-pager-page-sizes>
                                        <kendo-pager-info></kendo-pager-info>
                                    </ng-template>
                                </kendo-grid>
                            </section>

                        </div>
                    </div>
                </div>
            </mat-tab>
            <!-- Vendor Address -->

            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-map-location-dot"></i> &nbsp;
                    Address
                </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div fxLayout="row" fxLayoutWrap="wrap">
                            <div class="text-end">
                                <button class="btn btn-primary Addbtn" *ngIf="!viewMode" type="button"
                                    (click)="AddressDialog()">
                                    <i class="fa fa-plus-circle me-2"></i>Add
                                </button>
                            </div>
                            <hr class="mt-0 mb-4" />
                            <section class="custom-table-wrapper">
                                <kendo-grid [kendoGridBinding]="vendorAddress" [filterable]="true" [resizable]="true"
                                    [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                    [selectable]="{ enabled: true }">
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                        justifyContent: 'center',
                                        
                                      }" field="addresstypeName" title="Address Type" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.addresstypeName }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{
                                      'text-align': 'left',
                                      padding: '5px',
                                      
                                    }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" field="addressName" title="Name" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.addressName }}
                                        </ng-template>
                                    </kendo-grid-column>

                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="countryName" title="Country" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.countryName }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="cityName" title="City" [width]="100">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            {{ dataItem.cityName }}
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" field="primaryAddress" filter="boolean" title="Primary Address" [width]="115">
                                        <ng-template kendoGridCellTemplate let-dataItem>
                                            <mat-checkbox class="example-margin" [disabled]="true"
                                                [(ngModel)]="dataItem.primaryAddress"></mat-checkbox>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="liveStatus" filter="boolean" title="Active" [width]="90">
                                        <ng-template kendoGridCellTemplate let-dataItem>
                                            <mat-checkbox class="example-margin" [disabled]="true"
                                                [(ngModel)]="dataItem.liveStatus"></mat-checkbox>
                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                      justifyContent: 'center',
                                      
                                    }" title="Action" [width]="80" [sticky]="true">
                                        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                            <a class="view" type="button" (click)="onviewAddress(dataItem)"><i
                                                    class="fas fa-eye"></i></a>&nbsp;
                                            <a class="edit" type="button" *ngIf="!viewMode"
                                                (click)="onEditAddress(dataItem)"><i
                                                    class="fas fa-square-pen"></i></a>&nbsp;
                                            <a class="delete" type="button" *ngIf="!viewMode"
                                                (click)="onDeleteAddress(dataItem)"><i
                                                    class="fas fa-trash"></i></a>&nbsp;

                                        </ng-template>
                                    </kendo-grid-column>
                                    <kendo-grid-row-index></kendo-grid-row-index>
                                    <ng-template kendoPagerTemplate>
                                        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                        <kendo-pager-numeric-buttons
                                            [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                        <kendo-pager-next-buttons></kendo-pager-next-buttons>

                                        <kendo-pager-page-sizes class="Page-Short"
                                            [pageSizes]="sizes"></kendo-pager-page-sizes>
                                        <kendo-pager-info></kendo-pager-info>
                                    </ng-template>
                                </kendo-grid>
                            </section>

                        </div>
                    </div>
                </div>
            </mat-tab>
            <!-- Account Details-->
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-building-columns"></i> &nbsp;
                    Account Details
                </ng-template>
                <div class="component-list">
                    <div fxLayout="row" fxLayoutWrap="wrap">
                        <div class="table-list-display">
                            <div class="component-creation">
                                <div class="header-container">
                                    <form [formGroup]="VendorForm" #form="ngForm" class="mt-3">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">Credit Limit</mat-label>
                                                    <input matInput formControlName="creditLimit"
                                                        (input)="creditLimit($event)" [readonly]="disablefields"
                                                        placeholder="Credit Limit" autocomplete="off">
                                                    <mat-error *ngIf="
                                                        VendorForm.controls['creditLimit'].dirty &&
                                                        VendorForm.hasError('required', 'creditLimit')
                                                  " class="text-danger">Credit Limit is required*</mat-error>

                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">Credit Days</mat-label>
                                                    <input matInput formControlName="creditDays"
                                                        (input)="creditDays($event)" [readonly]="disablefields"
                                                        placeholder="Credit Days" autocomplete="off">
                                                    <mat-error *ngIf="
                                                        VendorForm.controls['creditDays'].dirty &&
                                                        VendorForm.hasError('required', 'creditDays')
                                                  " class="text-danger">Credit days
                                                        is
                                                        required*</mat-error>

                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">Trade License Number</mat-label>
                                                    <input matInput type="text" formControlName="tradeLicenseNumber"
                                                        maxlength="20" [readonly]="disablefields"
                                                        placeholder="Trade License Number" autocomplete="off">
                                                    <mat-error *ngIf="
                                                        VendorForm.controls['tradeLicenseNumber'].dirty &&
                                                        VendorForm.hasError('required', 'tradeLicenseNumber')
                                                  " class="text-danger">Trade License Number
                                                        is
                                                        required*</mat-error>

                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">Trade License Expiry Date</mat-label>
                                                    <input matInput [matDatepicker]="picker"
                                                        name="tradeLicenseExpiryDate" [readonly]="disablefields"
                                                        formControlName="tradeLicenseExpiryDate"
                                                        (dateInput)="addEvent($event)" (dateChange)="addEvent($event)"
                                                        [matDatepickerFilter]="dateFilter">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="picker"></mat-datepicker-toggle>
                                                    <mat-datepicker #picker></mat-datepicker>
                                                    <mat-error *ngIf="
                                                    VendorForm.controls['tradeLicenseExpiryDate'].dirty &&
                                                    VendorForm.hasError('required', 'tradeLicenseExpiryDate')
                                              " class="text-danger">Trade License Expiry Date
                                                        is
                                                        required*</mat-error>

                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">TRN</mat-label>
                                                    <input matInput type="text" formControlName="trn" placeholder="TRN"
                                                        maxlength="20" [readonly]="disablefields" autocomplete="off">
                                                    <mat-error *ngIf="
                                                        VendorForm.controls['trn'].dirty &&
                                                        VendorForm.hasError('required', 'trn')
                                                  " class="text-danger">TRN

                                                        is
                                                        required*</mat-error>

                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolor">Vendor Ranking
                                                    </mat-label>
                                                    <input matInput formControlName="vendorRankingId"
                                                        [readonly]="disablefields" [matAutocomplete]="vendorRanking">
                                                    <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                                    <mat-error *ngIf="
                                                        VendorForm.controls['vendorRankingId'].dirty &&
                                                        VendorForm.hasError('required', 'vendorRankingId')
                                                  " class="text-danger">Vendor Ranking
                                                        is
                                                        required*</mat-error>

                                                </mat-form-field>
                                                <mat-autocomplete #vendorRanking="matAutocomplete"
                                                    [displayWith]="displayVendorRankingListLabelFn"
                                                    (optionSelected)="VendorrankListSelectedoption($event)">
                                                    <mat-option
                                                        *ngFor="let vendorRankingList of filteredVendorRankingListOptions$ | async"
                                                        [value]="vendorRankingList"
                                                        [disabled]="vendorRankingList.isNotFound">
                                                        {{ vendorRankingList.vendorRanking}}
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field>
                                                    <mat-label class="labelcolorGray">SAP Reference Code</mat-label>
                                                    <input matInput type="text" formControlName="sapRefCode" readonly
                                                        maxlength="20" placeholder="SAP Reference Code"
                                                        autocomplete="off">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <!-- Potential Customer Attachments -->
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa-solid fa-file-lines"></i>&nbsp;
                    Documents
                </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div class="text-end">
                            <button class="btn btn-primary Addbtn" *ngIf="!viewMode" type="button"
                                (click)="AddDocument()"><i class="fa fa-plus-circle me-2"></i>Add</button>
                        </div>
                        <hr class="mt-0 mb-4" />
                        <section class="custom-table-wrapper">
                            <kendo-grid [kendoGridBinding]="documentarray" [filterable]="true" [resizable]="true"
                                [height]="500" [pageSize]="20" [sortable]="true" [pageable]="true"
                                [selectable]="{enabled: true}">
                                <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }"
                                    [headerStyle]="{ justifyContent: 'center' }" field="documentTypeName"
                                    title="Document Type*" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        {{dataItem.documentTypeName}}
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'center','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" [disabled]="true" field="mandatory"
                                    filter="boolean" title="Mandatory" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <mat-checkbox [disabled]="true" [(ngModel)]="dataItem.mandatory"></mat-checkbox>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'center','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="isCollected" title="IsCollected"
                                    filter="boolean" [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <mat-checkbox [disabled]="true"
                                            [(ngModel)]="dataItem.isCollected"></mat-checkbox>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="documentName" title="File *"
                                    [width]="100">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        {{dataItem.documentName}}
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="collectedDate"
                                    title="Collected Date" [width]="150" format="{0:dd/MMM/yyyy}" filter="date">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        {{dataItem.collectedDate | date: 'dd/MMM/yyyy'}}
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                                    justifyContent: 'center',
                                    
                                  }" field="remarks" title="Remarks" [width]="95">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        {{ dataItem.remarks }}
                                    </ng-template>
                                </kendo-grid-column>
                                <!-- <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                    [headerStyle]="{'justifyContent': 'center'}" field="remarks" title="Remarks" [width]="150">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        {{dataItem.remarks}}
                                    </ng-template>
                                </kendo-grid-column> -->
                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                    [headerStyle]="{'justifyContent': 'center'}" title="Action" [width]="70"
                                    [sticky]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-rowIndex="rowIndex">
                                        <a  type="submit"><i class="fas fa-eye"
                                                (click)="show(dataItem.documentName)"></i></a>&nbsp;
                                        <!-- <a class="view" type="submit"><i class="fas fa-eye"
                                                    (click)="View(dataItem,rowIndex)"></i></a>&nbsp; -->
                                        <a class="edit" type="submit" *ngIf="!viewMode"
                                            (click)="Edit(dataItem,rowIndex)"><i
                                                class="fas fa-square-pen"></i></a>&nbsp;
                                        <a class="delete" type="submit" *ngIf="!viewMode"
                                            (click)="Delete(dataItem,rowIndex)"><i class="fas fa-trash"></i></a>&nbsp;
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column [style]="{'text-align': 'center'}"
                                    [headerStyle]="{'justifyContent': 'center'}" title="ACT" [width]="50"
                                    [sticky]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                        <div *ngIf="!dataItem.IseditDoc">
                                            <a class="edit" type="button" *ngIf="!viewMode"
                                                (click)="Downloads(dataItem.documentName)">
                                                <i class="fas fa-cloud-arrow-down"></i></a>&nbsp;
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-row-index></kendo-grid-row-index>
                                <ng-template kendoPagerTemplate>
                                    <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                    <kendo-pager-numeric-buttons
                                        [buttonCount]="buttonCount"></kendo-pager-numeric-buttons>
                                    <kendo-pager-next-buttons></kendo-pager-next-buttons>

                                    <kendo-pager-page-sizes class="Page-Short"
                                        [pageSizes]="sizes"></kendo-pager-page-sizes>
                                    <kendo-pager-info></kendo-pager-info>
                                </ng-template>
                            </kendo-grid>
                        </section>

                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </mat-card>
</div>
<div class="m-4 mb-5 d-flex justify-content-end" style="bottom: 115px;">
    <button class="btn btn-warning draftbtn me-1" type="submit" [hidden]="hidebutton" *ngIf="!viewMode"
        (click)="onSaveGeneral('Draft')"><i class="fa fa-clock"></i> Draft</button>

    <button class="btn btn-primary savebtn me-1" type="submit" *ngIf="!viewMode && !gereralEdit" (click)="onSaveGeneral('Save')"><i
            class="fa fa-save me-2"></i> Save</button>
    <button class="btn btn-primary savebtn me-1" type="submit" *ngIf="!viewMode && gereralEdit" (click)="onSaveGeneral('Save')"><i
            class="fa fa-save me-2"></i> Update</button>

    <button type="button" class="btn btn-danger resetbtn" *ngIf="!viewMode" (click)="resetGeneral()"><i
            class="fa fa-times-circle"></i> Reset</button>
            
            <button class="btn btn-primary savebtn me-1" type="submit" [hidden]="hideApprovebutton" (click)="onApprovel()">
                Approve/Reject</button>
</div>

<ng-template let-data #ImagePreview>
    <div class="d-flex justify-content-between">
      <h2 mat-dialog-title> Preview  </h2>
        <mat-icon class="m-2" mat-dialog-close style="color: red;cursor: pointer;">close</mat-icon>
    </div>
    <img src="{{data}}" alt="" style="max-width: 700px;">
  </ng-template>