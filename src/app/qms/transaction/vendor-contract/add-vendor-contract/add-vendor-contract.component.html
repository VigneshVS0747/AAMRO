<div class="mt-2 mb-2 mx-3">
    <div>
        <div class="mb-3">
            <!-- <div class="d-flex flex-wrap justify-content-between align-items-center mb-2">
                <h3>
                    Vendor Contract - FFS
                </h3>
                <button mat-raised-button color="primary" (click)="Return()">
                    Return to List
                </button>
            </div> -->
            <div class="header-container d-flex justify-content-between align-items-center flex-wrap">
                <h3 class="box-title">
                    <img src="./assets/images/billing-storage.png" alt="Vendor Contract - FFS" />
                    <span>Vendor Contract - FFS</span>
                </h3>
                <button class="btn btn-primary returntolistbtn" type="button" (click)="Return()">
                    <i class="fa fa-list me-2"></i> Return to List
                </button>
            </div>
            <mat-divider></mat-divider>
        </div>
    </div>

    <mat-card class="mt-3 mb-3">
        <!-- <mat-card-title class="title">
            Potential Customer
        </mat-card-title>
        <br /> -->
        <mat-tab-group animationDuration="0ms" [(selectedIndex)]="selectedIndex" #matgroup>
            <mat-tab class="my-2">
                <ng-template mat-tab-label>
                    <i class="fas fa-house mx-1"></i>
                    General
                </ng-template>
                <div class="table-list-display">
                    <div class="mt-3 mb-3">
                        <form [formGroup]="vendorCustomerForm">
                            <div class="row mt-2">
                                <!-- <div *ngIf="vendorContractFFSId === '' || vendorContractFFSId === null" class="col-12 col-md-4">
                                    <mat-form-field class="w-100 mt-1">
                                        <mat-label class="labelcolor">Copy From Existing Contract</mat-label>
                                        <input type="text"  aria-label="Number" matInput
                                            formControlName="copyReference" [matAutocomplete]="auto0" (blur)="validatePastedValueInCopy()">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto0="matAutocomplete"
                                            (optionSelected)="OnCopyRefernceEvent($event)">
                                            <mat-option *ngFor="let option of filteredcopyReference | async"
                                                [value]="option?.contractNumber">
                                                {{option?.contractNumber}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div> -->

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Vendor Name</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="vendorName" [matAutocomplete]="auto1" (blur)="validatePastedValue()">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto1="matAutocomplete"
                                            (optionSelected)="OnVendorChangeEvent($event)">
                                            <mat-option *ngFor="let option of filteredVendor | async"
                                                [value]="option?.vendorName">
                                                {{option?.vendorName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error
                                            *ngIf="f.vendorName.touched && f.vendorName.hasError('required') && !f.vendorName.touched && f.vendorName.hasError('invalidOption')">Vendor
                                            Name is required</mat-error>
                                        <!-- <mat-error
                                            *ngIf="f.vendorName.touched && f.vendorName.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Date</mat-label>
                                        <input matInput placeholder="DD/MM/YYYY" formControlName="date" [matDatepicker]="picker1" [matDatepickerFilter]="dateFilter">
                                        <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                                        <mat-error *ngIf="f.date.touched && f.date.hasError('required')">Date is
                                            required</mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolorGray">Contract Number</mat-label>
                                        <input type="tel" formControlName="contractNumber" matInput readonly
                                            >
                                        <mat-error
                                            *ngIf="f.contractNumber.touched && f.contractNumber.hasError('required')">Contract
                                            Number is required</mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Vendor Contract Number</mat-label>
                                        <input formControlName="vendorContractNumber" matInput
                                            >
                                        <mat-error
                                            *ngIf="f.vendorContractNumber.touched && f.vendorContractNumber.hasError('required')">Customer
                                            Contract Number is required</mat-error>
                                        <mat-error
                                            *ngIf="f.vendorContractNumber.touched && f.vendorContractNumber.hasError('maxlength')">
                                            Vendor Contract Number cannot exceed 25 characters
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                      <mat-label class="labelcolor">Valid From</mat-label>
                                      <input matInput placeholder="DD/MM/YYYY" formControlName="validFrom" [matDatepicker]="picker2">
                                      <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                                      <mat-datepicker #picker2></mat-datepicker>
                                      <mat-error *ngIf="f.validFrom.touched && f.validFrom.hasError('required')">
                                        Valid From is required
                                      </mat-error>
                                      <mat-error *ngIf="vendorCustomerForm.get('validFrom')?.hasError('fromDateRange')">
                                        Valid From date cannot be earlier than the contract date.
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                  
                                  <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                      <mat-label class="labelcolor">Valid To</mat-label>
                                      <input matInput placeholder="DD/MM/YYYY" formControlName="validTo" [matDatepicker]="picker3">
                                      <mat-datepicker-toggle matIconSuffix [for]="picker3"></mat-datepicker-toggle>
                                      <mat-datepicker #picker3></mat-datepicker>
                                      <mat-error *ngIf="f.validTo.touched && f.validTo.hasError('required')">
                                        Valid To is required
                                      </mat-error>
                                      <mat-error *ngIf="f.validTo.touched && f.validTo.hasError('dateRange')">
                                        Valid To date cannot be earlier than Valid From date
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                  

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolorGray">Address</mat-label>
                                        <textarea formControlName="address" matInput rows="1" [disabled]="true"
                                            ></textarea>
                                        <mat-error *ngIf="f.address.touched && f.address.hasError('required')">Address
                                            is
                                            required</mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Service Country</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="country" [matAutocomplete]="auto2">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto2="matAutocomplete"
                                            (optionSelected)="OnCountryEvent($event)">
                                            <mat-option *ngFor="let option of filteredCountry | async"
                                                [value]="option?.countryName">
                                                {{option?.countryName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error *ngIf="f.country.touched && f.country.hasError('required')">Country
                                            is
                                            required</mat-error>
                                        <!-- <mat-error
                                            *ngIf="f.country.touched && f.country.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Service Currency</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="currency" [matAutocomplete]="auto3">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto3="matAutocomplete"
                                            (optionSelected)="OnchangeEvent($event)">
                                            <mat-option *ngFor="let option of filteredCurrency | async"
                                                [value]="option?.currencyName">
                                                {{option?.currencyName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error
                                            *ngIf="f.currency.touched && f.currency.hasError('required')">Currency is
                                            required</mat-error>
                                        <!-- <mat-error
                                            *ngIf="f.currency.touched && f.currency.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>


                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolorGray">Status</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="status" [matAutocomplete]="auto4">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto4="matAutocomplete"
                                            (optionSelected)="OnStatusChangeEvent($event)">
                                            <mat-option *ngFor="let option of filteredStatus | async"
                                                [value]="option?.contractStatus" [disabled]="statusDisableOption(option)">
                                                {{option?.contractStatus}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error *ngIf="f.status.touched && f.status.hasError('required')">Status is
                                            required</mat-error>
                                        <!-- <mat-error
                                            *ngIf="f.status.touched && f.status.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolorGray">Approval Status</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="approvalStatus" [matAutocomplete]="auto5">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto5="matAutocomplete"
                                            (optionSelected)="OnchangeEvent($event)">
                                            <mat-option *ngFor="let option of filteredApprovalStatus | async"
                                                [value]="option?.approvalStatus">
                                                {{option?.approvalStatus}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error
                                            *ngIf="f.approvalStatus.touched && f.approvalStatus.hasError('required')">Approval
                                            Status is required</mat-error>
                                        <!-- <mat-error
                                            *ngIf="f.approvalStatus.touched && f.approvalStatus.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4" *ngIf="showCancelFields">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">InActive Reason</mat-label>
                                        <input type="text" aria-label="Number" matInput
                                            formControlName="cancelReasonControl" [matAutocomplete]="auto14">
                                        <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                        <mat-autocomplete #auto14="matAutocomplete"
                                            (optionSelected)="OnchangeEvent($event)">
                                            <mat-option *ngFor="let option of filteredcancelReasonControl | async"
                                                [value]="option?.reasonName">
                                                {{option?.reasonName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error *ngIf="f.cancelReasonControl.hasError('required')">
                                            InActive Reason is required
                                        </mat-error>
                                        <!-- <mat-error *ngIf="f.cancelReasonControl.hasError('invalidOption')">Invalid
                                            Option</mat-error> -->
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4" *ngIf="showCancelFields">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">InActive Remark</mat-label>
                                        <input formControlName="cancelRemarkControl" matInput
                                            >
                                            <mat-error *ngIf="f.cancelRemarkControl.hasError('required')">
                                                InActive Remark is required
                                            </mat-error>
                                            <mat-error *ngIf=" f.cancelRemarkControl.hasError('maxlength')">
                                                InActive Remarks cannot exceed 500 characters
                                              </mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="col-12 col-md-4">
                                    <mat-form-field class="w-100">
                                        <mat-label class="labelcolor">Remarks</mat-label>
                                        <textarea formControlName="remarks" matInput
                                            ></textarea>
                                        <mat-error *ngIf="f.remarks.touched && f.remarks.hasError('maxlength')">
                                            Remarks cannot exceed 500 characters
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="mt-2">
                        <div class="d-flex justify-content-end mb-2">
                            <!-- <button [disabled]="hasViewRoute" mat-raised-button color="primary" (click)="Add()">
                                Add
                            </button> -->
                            <button class="btn btn-primary" type="button" [disabled]="hasViewRoute || isActive"
                            (click)="Add()">
                            <i class="fa fa-plus-circle me-2"></i>Add
                        </button>
                        </div>
                        <kendo-grid [kendoGridBinding]="ContractList" [filterable]="true" [resizable]="true"
                            [height]="500" [pageSize]="pageSize" [sortable]="true" [pageable]="true"
                            [selectable]="{ enabled: true }" [skip]="skip" (pageChange)="pageChange($event)">
                            <kendo-grid-column [style]="{
                                'text-align': 'left',
                                padding: '5px',
                              }" [headerStyle]="{
                                justifyContent: 'center',
                                
                              }" field="lineItemCategoryName" title="Aamro Line Item Category" [width]="210">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.lineItemCategoryName }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="vendorLineItem"
                                title="Vendor Line Item" filter="text" [width]="120">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.vendorLineItem }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <!-- <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="aliasName" title="Alias Name"
                                filter="text" [width]="130">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.aliasName }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column> -->

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="calculationParameter"
                                title="Calculation Parameter" filter="text" [width]="200">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.calculationParameter }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="calculationType"
                                title="Calculation Type" filter="text" [width]="160">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.calculationType }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>


                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="unitValue" title="Value"
                                filter="text" [width]="100">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.unitValue }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="taxCodeName" title="Tax Name"
                                filter="text" [width]="110">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.taxCodeName }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="taxPercentage" title="Tax Percentage"
                                filter="text" [width]="140">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.taxPercentage }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="minValue" title="Minimum Value"
                                filter="text" [width]="140">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.minValue }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{'text-align': 'left',padding: '5px',}"
                                [headerStyle]="{justifyContent: 'center',}" field="remarks" title="Remarks"
                                filter="text" [width]="150">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                    <span>
                                        {{ dataItem.remarks }}
                                    </span>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }" [headerStyle]="{
                              justifyContent: 'center',
                              
                            }" field="livestatus" title="Active" filter="boolean" [width]="100">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <div *ngIf="dataItem.Isedit">
                                        <mat-checkbox class="example-margin" [(ngModel)]="dataItem.livestatus"
                                            (change)="handleChange($event, dataItem)"></mat-checkbox>
                                    </div>
                                    <div *ngIf="!dataItem.Isedit">
                                        <mat-checkbox class="example-margin" [disabled]="true"
                                            [(ngModel)]="dataItem.livestatus">
                                        </mat-checkbox>
                                    </div>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                justifyContent: 'center',
                                  
                              }" title="Action" [width]="100" [sticky]="true">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-rowIndex="rowIndex">
                                    <div class="d-flex flex-wrap justify-content-center gap-2">
                                        <a type="submit" [class.disabled]="this.hasViewRoute || isActive"
                                            (click)="Edit(dataItem,rowIndex)">
                                            <i class="fas fa-square-pen"></i>
                                        </a>&nbsp;
                                        <a type="submit" [class.disabled]="this.hasViewRoute || isActive"
                                            (click)="Delete(dataItem.regionMapId,rowIndex)">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                        <a type="submit" (click)="view(dataItem.regionMapId,rowIndex)">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </div>
                                </ng-template>
                            </kendo-grid-column>

                            <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                justifyContent: 'center',
                                  
                              }" title="Mapping" [width]="100" [sticky]="true">
                                <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-rowIndex="rowIndex">
                                    <div class="d-flex flex-wrap justify-content-center gap-2">
                                        <a type="submit" (click)="mapping(dataItem,rowIndex)">
                                            <i class="fa-solid fa-list-ul fa-lg"></i>
                                        </a>&nbsp;
                                    </div>
                                </ng-template>
                            </kendo-grid-column>
                        </kendo-grid>
                    </div>
                </div>
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fas fa-paperclip mx-1"></i>
                    Attachments
                </ng-template>
                <div class="table-list-display">
                    <div class="component-list">
                        <div class="mb-2">
                            <div class="d-flex flex-wrap justify-content-end align-items-center mb-1">

                                <!-- <button mat-raised-button color="primary" (click)="addAttached()"
                                    [disabled]="showAddRow || hasViewRoute">
                                    Add
                                </button> -->
                                <button class="btn btn-primary" [disabled]="showAddRow || hasViewRoute" type="button"
                                (click)="addAttached()">
                                <i class="fa fa-plus-circle me-2"></i>Add
                            </button>
                            </div>
                            <mat-divider></mat-divider>
                        </div>
                        <section class="custom-table-wrapper">
                            <div class="mt-2 mb-2">
                                <div>
                                    <div class="mt-2">
                                        <kendo-grid [kendoGridBinding]="attchmentList" [filterable]="true"
                                            [resizable]="true" [height]="500" [pageSize]="pageSize" [sortable]="true"
                                            [pageable]="true" [selectable]="{ enabled: true }" [skip]="skip"
                                            (pageChange)="pageChange($event)">
                                            <kendo-grid-column [style]="{
                                                'text-align': 'left',
                                                padding: '5px',
                                                
                                              }" [headerStyle]="{
                                                justifyContent: 'center',
                                                
                                              }" field="documentIdName" title="Document Name*" [width]="80">
                                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">

                                                    <div *ngIf="dataItem?.Isedit">
                                                        <mat-form-field appearance="fill" class="w-full w-100">
                                                            <mat-label class="labelcolor">Document Name</mat-label>
                                                            <input type="text" matInput [formControl]="DocControl"
                                                                [matAutocomplete]="auto" required>
                                                            <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                                            <mat-autocomplete autoActiveFirstOption
                                                                #auto="matAutocomplete"
                                                                (optionSelected)="SelectedDoc($event.option.value)">
                                                                <mat-option
                                                                    *ngFor="let option of filteredDocName | async"
                                                                    [value]="option?.documentName">
                                                                    {{ option?.documentName }}
                                                                </mat-option>
                                                            </mat-autocomplete>
                                                            <mat-error *ngIf="DocControl.hasError('required')"
                                                                class="text-danger">
                                                                Field is required*
                                                            </mat-error>
                                                            <mat-error *ngIf="DocControl.hasError('maxlength')">
                                                                Document Name cannot exceed 250 characters
                                                            </mat-error>
                                                            <!-- <mat-error
                                                            *ngIf="DocControl.hasError('invalidOption')">Invalid
                                                            Option</mat-error> -->
                                                        </mat-form-field>
                                                    </div>

                                                    <span *ngIf="!dataItem?.Isedit">
                                                        {{ dataItem.documentIdName }}
                                                    </span>

                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column [style]="{ 'text-align': 'left', padding: '5px' }"
                                                [headerStyle]="{
                                              justifyContent: 'center',
                                              
                                            }" field="documentName" title="File Path*" [width]="100">
                                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                                    <div *ngIf="dataItem.Isedit">
                                                        <input type="file" class="form-control"
                                                            (change)="onFileChange($event)" #fileInput readonly>
                                                        <div *ngIf="fileInput.value === ''" class="text-danger">
                                                            Please select a file.
                                                        </div>
                                                    </div>
                                                    <div *ngIf="!dataItem.Isedit">
                                                        {{dataItem.documentName}}
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>

                                            <kendo-grid-column [style]="{'text-align': 'left','padding': '5px'}"
                                                [headerStyle]="{'justifyContent': 'center'}" field="remarks"
                                                title="Remarks" [width]="160">
                                                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                                                    <div *ngIf="dataItem.Isedit">
                                                        <mat-form-field style="width: 100%;">
                                                            <textarea type="text" matInput [(ngModel)]="remark"
                                                                maxlength="500"></textarea>

                                                        </mat-form-field>

                                                    </div>
                                                    <div *ngIf="!dataItem.Isedit">
                                                        {{dataItem.remarks}}
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>

                                            <kendo-grid-column [style]="{ 'text-align': 'center' }" [headerStyle]="{
                                                justifyContent: 'center',
                                                  
                                              }" title="Action" [width]="80" [sticky]="true">
                                                <ng-template kendoGridCellTemplate let-dataItem="dataItem"
                                                    let-rowIndex="rowIndex">
                                                    <div *ngIf="!dataItem.Isedit">
                                                        <button mat-icon-button type="submit"
                                                            (click)="AttchedView(dataItem,rowIndex);Downloads(dataItem.documentName)"><i
                                                                class="fas fa-eye"></i>
                                                        </button>&nbsp;
                                                        <button mat-icon-button type="submit"
                                                            [class.disabled]="this.hasViewRoute"
                                                            (click)="AttchedDelete(dataItem.regionMapId,rowIndex)"><i
                                                                class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                    <div *ngIf="dataItem.Isedit">
                                                        <button mat-icon-button type="submit" #submitButton tabindex="0"
                                                            (keydown.enter)="hndlKeyPress($event, dataItem)"
                                                            (change)="hndlChange($event)"
                                                            (click)="AttachedSave(dataItem)">
                                                            <ng-container *ngIf="showAddRow; else editIcon">
                                                                <i class="fas fa-sd-card"></i>
                                                            </ng-container>
                                                            <ng-template #editIcon>
                                                                <i class="fas fa-sd-card"></i> </ng-template>
                                                        </button>&nbsp;
                                                        <button mat-icon-button type="submit" #cancelButton tabindex="0"
                                                            (keydown.enter)="handleKeyPress($event, dataItem)"
                                                            (click)="onAttachedCancel(dataItem,rowIndex)"><i
                                                                class="fas fa-xmark"></i>
                                                        </button>
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>
                                        </kendo-grid>
                                    </div>
                                </div>
                            </div>
                        </section>

                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
        <div class="mb-2 mt-2 d-flex align-items-center justify-content-end gap-2">
            <button class="btn btn-warning draftbtn me-1" type="submit" *ngIf="isDraft" [disabled]="hasViewRoute"
                (click)="saveAll('Draft')"><i class="fa fa-clock"></i> Draft</button>
            <button *ngIf="!this.vendorContractFFSId" class="btn btn-primary savebtn me-1" type="submit" [disabled]="hasViewRoute" (click)="saveAll('Save')"><i
                    class="fa fa-save me-2"></i> Save
            </button>
            <button *ngIf="this.vendorContractFFSId" class="btn btn-primary savebtn me-1" type="submit" [disabled]="hasViewRoute" (click)="saveAll('Save')"><i
                    class="fa fa-save me-2"></i> Update
            </button>
            <button type="button" class="btn btn-danger resetbtn" [disabled]="hasViewRoute" (click)="reset()"><i
                    class="fa fa-times-circle"></i> Reset</button>
        </div>
    </mat-card>
</div>


<ng-template let-data #ImagePreview>
    <div class="d-flex justify-content-between">
        <h2 mat-dialog-title> Preview </h2>
        <mat-icon class="m-2" mat-dialog-close style="color: red;cursor: pointer;">close</mat-icon>
    </div>
    <img src="{{data}}" alt="" style="max-width: 700px;">
</ng-template>